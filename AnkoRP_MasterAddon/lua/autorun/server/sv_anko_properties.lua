--[[
    Property system for rp_SouthSide.
]]--

ANKORP_PROPERTIES = {
    ["Gas Mogul"] = {
        2232,
        2233,
        2234,
    },
    ["Motel 1"] = {
        4026,
        4025,
        4011
    },
    ["Motel 2"] = {
        4019,
        4020,
        4008
    },
    ["Motel 3"] = {
        4007,
        4018,
        4017
    },
    ["Motel 4"] = {
        3999,
        4003,
        4002
    },
    ["Motel 5"] = {
        4004,
        2471,
        4012
    },
    ["Motel 6"] = {
        4010,
        4024,
        4023
    },
    ["Motel 7"] = {
        4009,
        4021,
        4022
    },
    ["Motel 8"] = {
        4006,
        4015,
        4016
    },
    ["Motel 9"] = {
        3998,
        4001,
        4000
    },
    ["Motel 10"] = {
        4005,
        4013,
        4014
    },
    ["Motel Reception"] = {
        2229
    },
    ["South Warehouses"] = {
        2151,
        2150,
        2112,
        2116,
        2115,
        2109,
        2110
    },
    ["Riverside Warehouse"] = {
        2107,
        2106,
        2689,
        2117,
        2118,
        2431,
        2432
    },
    ["Tool Unit"] = {
        2148,
        2705,
        2704
    },
    ["Salvage Yard"] = {
        2119,
        2103,
        2104,
        2345,
        2346
    },
    ["East Warehouse"] = {
        2101,
        2100
    },
    ["Fire Station"] = {
        2336,
        2351,
        2352,
        2337
    },
    ["Le Grande 1"] = {
        3716,
        3711
    },
    ["Le Grande 2"] = {
        3742,
        3719
    },
    ["Le Grande 3"] = {
        3743,
        3725
    },
    ["Le Grande 4"] = {
        3744,
        3723
    },
    ["Le Grande 5"] = {
        3745,
        3702
    },
    ["Le Grande 6"] = {
        3746,
        3707
    },
    ["Grand and New Life Shop"] = {
        2144,
        2155,
        2156
    },
    ["Southern Plaza Shop"] = {
        2057,
        2506,
        2497
    },
    ["Northern Plaza Shop"] = {
        2143,
        2507,
        2498
    },
    ["Raised Plaza Shop"] = {
        2145,
        2510,
        2154
    },
    ["Leprechaun's Winklepicker"] = {
        2869,
        2848,
        2878,
        2907,
        2880,
        2915
    },
    ["House 1"] = {
        2367,
        2370,
        2373,
        2376,
        2374,
        2366
    },
    ["House 2"] = {
        2391,
        2394,
        2395,
        2392,
        2393,
        2375
    },
    ["House 3"] = {
        2398,
        2401,
        2402,
        2400,
        2399,
        2397
    },
    ["House 4"] = {
        2369,
        2408,
        2407,
        2404,
        5210,
        2406
    },
    ["House 5"] = {
        2443,
        2449,
        2447,
        2446,
        2444,
        2448
    },
    ["House 6"] = {
        2548,
        2544,
        5208,
        2543,
        2369,
        5211
    },
    ["House 7"] = {
        2416,
        2418,
        2419,
        2417,
        2420,
        2421
    },
    ["House 8"] = {
        2668,
        2434,
        2435,
        2433,
        2436,
        2437
    },
    ["House 9"] = {
        2643,
        2550,
        2549,
        5212,
        5209,
        2551
    },
    ["7-Twelve"] = {
        2795,
        2794,
        2776,
        2765,
        2777,
        2781
    },
    ["Diner"] = {
        2343,
        2342,
        2799,
        2798,
        2805
    },
    ["Bits and PCs"] = {
        2764,
        2761,
        2762
    },
    ["Urban Outfits"] = {
        2736,
        2737,
        2738,
        2739
    },
    ["Church"] = {
        2698,
        2697
    },
    ["Gateway Tire and Service Center"] = {
        2159,
        2161,
        2166,
        2164,
        2165,
        2160
    },
    ["13th and Aversion Shop"] = {
        2146,
        2514,
        2153
    },
    ["13th Street Shop"] = {
        2147,
        2515,
        2152
    },
    ["Union Square Apt. A"] = {
        3273,
        3275,
        3274
    },
    ["Union Square Apt. B"] = {
        3276,
        3277,
        3278
    },
    ["Union Square Apt. C"] = {
        3270,
        3271,
        3272
    },
    ["Union Square Apt. D"] = {
        3268,
        3269,
        3092
    },
    ["Union Square Apt. E"] = {
        3138,
        3140,
        3139
    },
    ["Union Square Apt. F"] = {
        1399,
        1400,
        1401
    },
    ["Union Square Apt. G"] = {
        1394,
        1395,
        1396
    },
    ["Union Square Apt. H"] = {
        1397,
        1398,
        3093
    },
    ["Union Square Apt. I"] = {
        3133,
        3137,
        3136
    },
    ["Union Square Apt. J"] = {
        1402,
        1403,
        1404
    },
    ["Union Square Apt. K"] = {
        1405,
        1406,
        1407
    },
    ["Union Square Apt. L"] = {
        1408,
        1409,
        3094
    },
    ["13th Street Apt. 1"] = {
        2063,
        2064,
        1332
    },
    ["13th Street Apt. 2"] = {
        2389,
        2390,
        1328
    },
    ["13th Street Apt. 3"] = {
        2387,
        2388,
        1327
    },
    ["13th Street Apt. 4"] = {
        2068,
        2067,
        1331
    },
    ["13th Street Apt. 5"] = {
        2386,
        2385,
        1325
    },
    ["13th Street Apt. 6"] = {
        2069,
        2071,
        1330
    },
    ["13th Street Apt. 7"] = {
        2076,
        2077,
        1326
    },
    ["13th Street Apt. 8"] = {
        2070,
        2072,
        1329
    },
    ["Pleasant Road Warehouse"] = {
        2124,
        2125,
        2126,
        2292
    },
    ["Vacant Hideout"] = {
        2843,
        2842,
        3892,
        2844
    },
    ["TEAM_CT_SPAWN"] = {
        2927,
        2926,
        2929,
        2928,
        3054,
        3053,
        3052,
        3051,
        2934,
        2947,
        2932,
        2933,
        3011,
        4499,
        2942,
        2944,
        2943,
        2948,
        2955,
        2958,
        2960,
        2980,
        2984,
        2985,
        2981,
        2982,
        2983,
        2989,
        2937,
        2938,
        2939,
        2945
    },
    ["TEAM_RE_SPAWN"] = {
        2835,
        2834,
        2836
    },
    ["TEAM_CM_SPAWN"] = {
        2129,
        2099,
        2133,
        2132,
        2131,
        2130,
        2134,
        2135
    },
    ["TEAM_TR_SPAWN"] = {
        2120,
        2121,
        2122,
        2123
    },
    ["TEAM_GUN_SPAWN"] = {
        2742,
        2744,
        2745,
        2747,
        2746,
        2743,
        2751,
        2750
    },
	["East VIP Room"] = {
		3684
	},
	["West VIP Room"] = {
		3689
	}
}

hook.Add( "playerKeysSold", "UnownWholeProperty", function( ply, door, cash )
    local i = door:MapCreationID()
	
    for k,v in pairs( ANKORP_PROPERTIES ) do
        if table.HasValue( v, i ) then
            DarkRP.notify( ply, 0, 5, "You sold your " .. k .. " property for $" .. cash * #v .. "." )
			ply:addMoney( math.ceil( GAMEMODE.Config.doorcost * ( 2 / 3 ) ) * (#v - 1) )
            for a,b in pairs( v ) do
                ents.GetMapCreatedEntity( b ):keysUnOwn( ply )
            end
        end
    end
end )

hook.Add( "playerBuyDoor", "OwnWholeProperty", function( ply, door )
    if !IsValid( door:getDoorOwner() ) then
        local i = door:MapCreationID()
		if i == 3684 or i == 3689 and !IsValid( door:getDoorOwner() ) then
			if ply:canAfford( 10000 ) then
				ply:addMoney( -9975 )
				DarkRP.notify( ply, 2, 5, "You rented a VIP Room in the club for $10,000" )
				return true, "", true
			else
				return false, "VIP Rooms cost $10,000 each.", false
			end
		end
		
        for k,v in pairs( ANKORP_PROPERTIES ) do
            if table.HasValue( v, i ) then
				if !ply:canAfford( GAMEMODE.Config.doorcost * #v ) then
					DarkRP.notify( ply, 1, 5, "You cannot afford this property." )
				return false
				end
                DarkRP.notify( ply, 0, 5, "You purchased the " .. k .. " property for $" .. GAMEMODE.Config.doorcost * #v .. "." )
				ply:addMoney( -GAMEMODE.Config.doorcost * (#v - 1) )
                for a,b in pairs( v ) do
                   ents.GetMapCreatedEntity( b ):keysOwn( ply )
                end
				return true, "", true
            end
        end
    end
end )

hook.Add( "hideSellDoorMessage", "DontNotifySells", function()
	return true
end )
